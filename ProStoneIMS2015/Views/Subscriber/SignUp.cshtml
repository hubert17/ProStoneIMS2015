@model ProStoneIMS2015.Models.Subscriber
@{
    ViewBag.Title = "Sign Up";
}

<div class="row">
    <div class="col-md-8">
        <h2>SignUp</h2>

        @using (Html.BeginForm("SignUp", "Subscriber", FormMethod.Post, new { @id = "subscriber-signup", @class = "form-horizontal", role = "form" }))
        {
            @Html.AntiForgeryToken()

            <div class="form-group">
                @Html.LabelFor(m => Model.CompanyName, new { @class = "control-label col-md-3" })
                <div class="col-md-9">
                    @Html.TextBoxFor(m => m.CompanyName, new { @class = "form-control required" })
                    <div>
                        @Html.ValidationMessageFor(m => m.CompanyName)
                    </div>
                </div>
            </div>

                <div class="form-group">
                    @Html.LabelFor(m => Model.SubscriberKey, new { @class = "control-label col-md-3" })
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.SubscriberKey, new { @class = "form-control required" })
                        <div>
                            @Html.ValidationMessageFor(m => m.SubscriberKey)
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => Model.FirstName, new { @class = "control-label col-md-3" })
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.FirstName, new { @class = "form-control required" })
                        <div>
                            @Html.ValidationMessageFor(m => m.FirstName)
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => Model.LastName, new { @class = "control-label col-md-3" })
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.LastName, new { @class = "form-control required" })
                        <div>
                            @Html.ValidationMessageFor(m => m.LastName)
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => Model.Street, new { @class = "control-label col-md-3" })
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Street, new { @class = "form-control required" })
                        <div>
                            @Html.ValidationMessageFor(m => m.Street)
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => Model.Address, new { @class = "control-label col-md-3" })
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Address, new { @class = "form-control required" })
                        <div>
                            @Html.ValidationMessageFor(m => m.Address)
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => Model.City, new { @class = "control-label col-md-3" })
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.City, new { @class = "form-control required" })
                        <div>
                            @Html.ValidationMessageFor(m => m.City)
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => Model.State, new { @class = "control-label col-md-3" })
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.State, new { @class = "form-control required" })
                        <div>
                            @Html.ValidationMessageFor(m => m.State)
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => Model.Zip, new { @class = "control-label col-md-3" })
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Zip, new { @class = "form-control required" })
                        <div>
                            @Html.ValidationMessageFor(m => m.Zip)
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => Model.Country, new { @class = "control-label col-md-3" })
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Country, new { @class = "form-control required" })
                        <div>
                            @Html.ValidationMessageFor(m => m.Country)
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => Model.Phone, new { @class = "control-label col-md-3" })
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Phone, new { @class = "form-control required" })
                        <div>
                            @Html.ValidationMessageFor(m => m.Phone)
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => Model.Email, new { @class = "control-label col-md-3" })
                    <div class="col-md-9">
                        @Html.TextBoxFor(m => m.Email, new { @class = "form-control required" })
                        <div>
                            @Html.ValidationMessageFor(m => m.Email)
                        </div>
                    </div>
                </div>

                <!-- Button -->
                <div class="form-group">
                    <div class="col-md-offset-3 col-md-9">
                        <input class="btn btn-primary" type="submit" value="Sign Up" />
                    </div>
                </div>


        }

    </div>

</div>
@section jqueryval{
    @Scripts.Render("~/bundles/jqueryval")
    @*<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.14.0/jquery.validate.min.js"></script>*@
    @*<script src="http://ajax.aspnetcdn.com/ajax/mvc/5.2.3/jquery.validate.unobtrusive.min.js"></script>*@
}

@section scripts{
    <script>
            $("form").removeData("validator");
            $("form").removeData("unobtrusiveValidation");
            $.validator.unobtrusive.parse("form");

            $('#subscriber-signup').on('submit', function (e) {
                e.preventDefault();
                var form = $(this);
                $.ajax({
                    cache: false,
                    async: true,
                    type: "POST",
                    url: form.attr('action'),
                    data: form.serialize(),
                    success: function (result) {
                        if (!result.success) {
                            e.preventDefault();
                            alert(result.message);
                        }
                        else
                        {
                            alert(result.success);
                            alert(result.tenant);
                        }
                    }
                });

            });
    </script>

}

